<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•í™”í•˜ê¸° v1.0</title>
    <style>
        /* ê°„ë‹¨í•œ ìŠ¤íƒ€ì¼ë§ (ê¸°ì¡´ style.css ë‚´ìš© ë³´ì™„) */
        :root {
            --money: #f1c40f;
            --hunt: #e67e22;
            --mine: #95a5a6;
            --point: #e74c3c;
        }
        body { background: #2c3e50; color: white; font-family: sans-serif; text-align: center; }
        .page { display: none; padding: 20px; }
        .active { display: block; }
        .main-menu-btn, .btn-nav, .btn-upgrade { 
            display: block; width: 200px; margin: 10px auto; padding: 10px; 
            border: none; border-radius: 5px; cursor: pointer; color: white; font-weight: bold;
        }
        .main-menu-btn { background: #34495e; }
        .btn-nav { background: #7f8c8d; }
        .btn-upgrade { background: #27ae60; width: 100%; }
        .bar-outer { width: 200px; height: 20px; background: #eee; margin: 5px auto; position: relative; border-radius: 10px; overflow: hidden; }
        #hp-fill { height: 100%; background: #e74c3c; width: 100%; transition: 0.3s; }
        #exp-fill { height: 100%; background: #3498db; width: 0%; transition: 0.3s; }
        .bar-text { position: absolute; width: 100%; top: 0; left: 0; font-size: 12px; color: #000; line-height: 20px; }
        .status-box, #inventory-list, #modal-item-list { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px; margin: 10px 0; }
        .inv-item { display: flex; justify-content: space-between; align-items: center; padding: 5px; border-bottom: 1px solid #444; }
        .sell-btn { background: #c0392b; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); }
        .modal-content { background: #34495e; width: 80%; margin: 20% auto; padding: 20px; border-radius: 10px; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="top-bar">
        <div>ğŸ’° <span id="gold">1000</span>G</div>
        <div>ğŸ§ª ë¬¼ì•½: <span id="potion-total">0</span> (<span id="potion-count">0</span>/10)</div>
        <div class="bar-outer">
            <div id="hp-fill"></div>
            <div class="bar-text">â¤ï¸ HP <span id="hp-val">100</span> / <span id="hp-max">100</span></div>
        </div>
        <div class="bar-outer">
            <div id="exp-fill"></div>
            <div class="bar-text">â­ Lv.<span id="user-lv">1</span> (<span id="exp-val">0</span> / <span id="exp-next">140</span>)</div>
        </div>
        <div id="emergency-btn" class="emergency-btn" onclick="getEmergencyMoney()" style="cursor:pointer; color:var(--money);">[ğŸ†˜ ê¸´ê¸‰ êµ¬ì œ]</div>
    </div>

    <div id="page-main" class="page active">
        <h1 style="color:var(--money); margin-bottom:15px; font-size:1.5em;">ê°•í™”í•˜ê¸° vx.x</h1>
        <div class="main-menu-btn" onclick="showPage('page-earn')">ğŸ’° ê³¨ë“œìˆ˜ê¸‰</div>
        <div class="main-menu-btn" onclick="showPage('page-upgrade')">ğŸ”¨ ê°•í™”í•˜ê¸°</div>
        <div class="main-menu-btn" onclick="showPage('page-info')">ğŸ‘¤ ë‚´ ì •ë³´</div>
        <div class="main-menu-btn" style="background:#c0392b;" onclick="fullHeal()">ğŸ¥ ì¹˜ë£Œì†Œ (ì „ì²´ íšŒë³µ)</div>
        <div class="main-menu-btn" style="background:#222;" onclick="showPage('page-shop-select')">ğŸ›’ ìƒì </div>
    </div>

    <div id="page-earn" class="page">
        <h2>ğŸ’° ê³¨ë“œìˆ˜ê¸‰</h2>
        <button class="main-menu-btn" style="background:var(--hunt);" onclick="alert('ì‚¬ëƒ¥í„° ì´ë™')">âš”ï¸ ì‚¬ëƒ¥í„°</button>
        <button class="main-menu-btn" style="background:var(--mine); color:black;" onclick="showPage('page-mine-select')">â›ï¸ ê´‘ì‚°</button>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
    </div>

    <div id="page-info" class="page">
        <h2>ğŸ‘¤ ë‚´ ì •ë³´ & ì¸ë²¤í† ë¦¬</h2>
        <div class="status-box">
            <p>âš”ï¸ ATK: <span id="info-atk">10</span> | ğŸ›¡ï¸ DEF: <span id="info-def">5</span></p>
        </div>
        <h3>ğŸ’ ì¸ë²¤í† ë¦¬ (ì•„ì´í…œ íŒë§¤ ê°€ëŠ¥)</h3>
        <div id="inventory-list">
            </div>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
    </div>

    <div id="page-upgrade" class="page">
        <h2>ğŸ”¨ ì¥ë¹„ ê°•í™”</h2>
        <div id="upgrade-target-display" style="padding:15px; background:#444; border-radius:5px; margin-bottom:10px;">
            ì„ íƒëœ ì¥ë¹„ ì—†ìŒ
        </div>
        <button onclick="openInventoryModal()" style="background:var(--hunt); margin-bottom:10px; font-size:0.9em; padding:5px 15px; border:none; border-radius:3px; color:white; cursor:pointer;">ğŸ“¦ ê°•í™”í•  ì¥ë¹„ ì„ íƒ</button>
        
        <div class="scroll-select-box" style="font-size:0.8em; margin-bottom:10px;">
            <h4 style="margin:5px 0; color:var(--money);">ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€ê¶Œ</h4>
            <label><input type="radio" name="prot" value="0" checked> ë¯¸ì‚¬ìš©</label>
            <label><input type="radio" name="prot" value="1"> í•˜ê¸‰(<span id="inv-scroll-1">0</span>)</label>
        </div>

        <div class="chance-display" style="margin-bottom:10px;">
            <span style="color:#4ecca3;">ì„±ê³µ <span id="up-chance">0</span>%</span> | 
            <span style="color:var(--point);">íŒŒê´´ <span id="up-break">0</span>%</span>
        </div>

        <button class="btn-upgrade" id="btn-up-exec" onclick="tryUpgrade()" disabled>ê°•í™”í•˜ê¸° (0G)</button>
        <div id="log-container" style="font-size:0.8em; color:#ccc; margin-top:10px;">ì‹œìŠ¤í…œ: ì¥ë¹„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë©”ì¸ìœ¼ë¡œ</button>
    </div>

    <div id="inv-modal" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0; color:var(--money);">ğŸ“¦ ê°•í™”í•  ì¥ë¹„ ì„ íƒ</h3>
            <p style="font-size:0.8em; color: #aaa;">* ì—¬ê¸°ì„œë„ íŒë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <div id="modal-item-list"></div>
            <button class="btn-nav" onclick="closeModal()">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<script>
    // --- ê²Œì„ ë°ì´í„° ---
    let player = {
        gold: 1000,
        inventory: [
            { id: 1, name: "ì´ˆë³´ìì˜ ê²€", level: 0, price: 500, type: "weapon" },
            { id: 2, name: "ë‚˜ë¬´ ë°©íŒ¨", level: 0, price: 300, type: "armor" }
        ]
    };

    let selectedItemIdx = -1;

    // --- í˜ì´ì§€ ì „í™˜ ---
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        if(pageId === 'page-info') renderInventory();
    }

    // --- ì¸ë²¤í† ë¦¬ ë Œë”ë§ (íŒë§¤ ë²„íŠ¼ í¬í•¨) ---
    function renderInventory() {
        const invList = document.getElementById('inventory-list');
        const modalList = document.getElementById('modal-item-list');
        
        let html = "";
        if (player.inventory.length === 0) {
            html = "<p>ì¸ë²¤í† ë¦¬ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</p>";
        } else {
            player.inventory.forEach((item, idx) => {
                html += `
                    <div class="inv-item">
                        <span>${item.name} (+${item.level})</span>
                        <div>
                            ${document.getElementById('page-upgrade').classList.contains('active') ? 
                                `<button onclick="selectForUpgrade(${idx})" style="background:#27ae60; color:white; border:none; padding:3px 8px; margin-right:5px; border-radius:3px;">ì„ íƒ</button>` : ''
                            }
                            <button class="sell-btn" onclick="sellItem(${idx})">íŒë§¤ (${Math.floor(item.price * 0.5)}G)</button>
                        </div>
                    </div>
                `;
            });
        }
        invList.innerHTML = html;
        modalList.innerHTML = html;
        updateUI();
    }

    // --- ì•„ì´í…œ íŒë§¤ í•¨ìˆ˜ ---
    function sellItem(idx) {
        const item = player.inventory[idx];
        const sellPrice = Math.floor(item.price * 0.5);
        
        if(confirm(`[${item.name}]ì„(ë¥¼) ${sellPrice}Gì— íŒë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
            player.gold += sellPrice;
            player.inventory.splice(idx, 1);
            
            // ë§Œì•½ ê°•í™” ì„ íƒ ì¤‘ì¸ ì•„ì´í…œì„ íŒ”ì•˜ë‹¤ë©´ ì„ íƒ í•´ì œ
            if (selectedItemIdx === idx) {
                selectedItemIdx = -1;
                document.getElementById('upgrade-target-display').innerText = "ê°•í™”í•  ì¥ë¹„ë¥¼ ì„ íƒí•˜ì„¸ìš”.";
                document.getElementById('btn-up-exec').disabled = true;
            }
            
            renderInventory(); // UI ê°±ì‹ 
            alert("íŒë§¤ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }

    // --- ê°•í™” ê´€ë ¨ ê¸°ëŠ¥ ---
    function openInventoryModal() {
        document.getElementById('inv-modal').style.display = 'block';
        renderInventory();
    }

    function closeModal() {
        document.getElementById('inv-modal').style.display = 'none';
    }

    function selectForUpgrade(idx) {
        selectedItemIdx = idx;
        const item = player.inventory[idx];
        document.getElementById('upgrade-target-display').innerHTML = `<strong>ì„ íƒë¨: ${item.name} (+${item.level})</strong>`;
        document.getElementById('btn-up-exec').disabled = false;
        document.getElementById('btn-up-exec').innerText = `ê°•í™”í•˜ê¸° (${(item.level + 1) * 100}G)`;
        closeModal();
    }

    function updateUI() {
        document.getElementById('gold').innerText = player.gold.toLocaleString();
    }

    function getEmergencyMoney() {
        player.gold += 1000;
        updateUI();
        alert("ê¸´ê¸‰ êµ¬ì œê¸ˆ 1,000Gë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤!");
    }

    // ì´ˆê¸°í™”
    updateUI();
</script>

</body>
</html>

