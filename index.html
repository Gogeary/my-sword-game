<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•í™”í•˜ê¸° v1.8</title> <style>
        /* [í•„ìˆ˜] ë ˆì´ì•„ì›ƒ ê¹¨ì§ ë°©ì§€ ì´ˆê¸°í™” */
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        /* [í…Œë§ˆ ìƒ‰ìƒ] */
        :root { --bg: #1a1a2e; --panel: #16213e; --point: #e94560; --text: #ecf0f1; --money: #f1c40f; --mine: #2ecc71; --hunt: #3498db; --hp: #ff4d4d; --exp: #9b59b6; }
        
        /* [ê¸°ë³¸ ë ˆì´ì•„ì›ƒ] */
        body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; text-align: center; background-color: var(--bg); color: var(--text); padding: 5px; margin: 0; user-select: none; }
        #game-container { background: var(--panel); max-width: 600px; margin: 0 auto; padding: 15px; border-radius: 15px; border: 2px solid var(--point); min-height: 95vh; position: relative; display: none; overflow: hidden; }
        
        /* [í˜ì´ì§€ ì „í™˜] */
        .page { display: none; animation: fadeIn 0.2s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* [ìƒë‹¨ ë°”] */
        .top-bar-container { background: #0f3460; padding: 10px; border-radius: 12px; margin-bottom: 15px; border-bottom: 2px solid var(--point); }
        .status-row { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.95em; font-weight: bold; }
        
        .bar-outer { background: #333; height: 20px; border-radius: 10px; overflow: hidden; position: relative; border: 1px solid #000; margin-bottom: 5px; }
        #hp-fill { background: var(--hp); height: 100%; width: 100%; transition: width 0.3s ease-out; }
        #exp-fill { background: var(--exp); height: 100%; width: 0%; transition: width 0.3s ease-out; }
        .bar-text { position: absolute; width: 100%; left: 0; top: 0; font-size: 0.75em; line-height: 20px; color: white; text-align: center; text-shadow: 1px 1px 2px black; z-index: 2; font-weight: bold; }

        /* [ë©”ì¸ ë²„íŠ¼] */
        .main-menu-btn { background: #533483; color: white; padding: 18px; margin: 8px 0; font-size: 1.1em; border-radius: 12px; cursor: pointer; border: 2px solid rgba(255,255,255,0.1); transition: 0.1s; font-weight: bold; width: 100%; display: block; }
        .main-menu-btn:active { transform: scale(0.98); }

        /* [ì•„ì´í…œ ì¹´ë“œ] */
        .item-card { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 10px; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; gap: 10px; border: 1px solid #333; }
        .item-icon { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; background: #000; border: 1px solid #555; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 1.5em; }
        .item-info { flex: 1; text-align: left; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-size: 0.9em; line-height: 1.4; }
        .item-actions { display: flex; gap: 4px; flex-shrink: 0; }
        .item-btn { padding: 6px 10px; font-size: 0.8em; border-radius: 5px; font-weight: bold; cursor: pointer; border: none; min-width: 50px; }

        /* [ê°•í™” ë²„íŠ¼] */
        .btn-upgrade { background: var(--point); color: white; height: 55px; font-size: 1.2em; margin: 10px 0; font-weight: bold; width: 100%; border: none; border-radius: 10px; cursor: pointer; }
        .btn-upgrade:disabled { background: #444; color: #888; cursor: not-allowed; }

        /* [ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ] */
        .grid-5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin: 15px 0; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px 0; }
        .cell { aspect-ratio: 1/1; background: #0f3460; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.5em; border: 2px solid #2a2a4e; position: relative; transition: 0.1s; }
        .cell:active { transform: scale(0.95); }
        .monster-lv { position: absolute; bottom: 2px; right: 2px; font-size: 0.6em; background: rgba(0,0,0,0.7); color: #fff; padding: 2px 4px; border-radius: 4px; }

        /* [ë¡œê·¸ì°½] */
        #log-container, #battle-log { height: 150px; overflow-y: auto; background: #121225; border-radius: 8px; padding: 10px; margin: 10px 0; font-size: 0.85em; text-align: left; color: #ccc; border: 1px solid #444; }

        /* [ë¡œê·¸ì¸ í™”ë©´] */
        #login-container { max-width: 400px; margin: 60px auto; padding: 30px; background: var(--panel); border: 2px solid var(--point); border-radius: 15px; }
        .login-input { width: 100%; padding: 15px; margin: 8px 0; border-radius: 8px; border: 1px solid #555; background: #0f3460; color: white; font-size: 1em; }
        .login-btn { width: 100%; padding: 15px; background: var(--point); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px; font-size: 1.1em; }

        /* [ì„¸ì´ë¸Œ ê´€ë¦¬] */
        .save-manage-box { margin-top: 25px; border-top: 1px solid #444; padding-top: 20px; }
        .btn-small { padding: 10px 15px; background: #444; color: #ddd; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9em; margin: 5px; }
        
        /* [ê³µí†µ] ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ */
        .btn-nav { background: #333; color: white; margin-top: 10px; padding: 12px; border: none; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; border: 1px solid #555; }
        
        /* [ëª¨ë‹¬] */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index: 2000; }
        .modal-content { position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); background: var(--panel); border: 2px solid var(--point); padding: 20px; border-radius: 12px; width: 90%; max-width: 420px; }
    </style>

    <script src="Database.js"></script>
    <script src="Skill.js"></script>
    <script src="Enhancement_System.js"></script>
    <script src="Main_Engine.js"></script>
    <script src="Combat_System.js"></script>
    <script src="Shop_System.js"></script>
    <script src="mine.js"></script>
</head>
<body>

<div id="login-container">
    <h1 style="color:var(--money); margin-bottom:20px;">ğŸ® ê°•í™”í•˜ê¸° v1.8(ìŠ¤í‚¬ì¶”ê°€)</h1> <input type="text" id="login-id" class="login-input" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
    <input type="password" id="login-pw" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
    
    <div style="text-align:left; margin-top:10px; color:#ccc; display:flex; align-items:center;">
        <input type="checkbox" id="auto-login" style="width:18px; height:18px; margin-right:8px;"> 
        <label for="auto-login" style="cursor:pointer;">ìë™ ë¡œê·¸ì¸</label>
    </div>
    
    <button class="login-btn" onclick="MainEngine.handleLogin()">ê²Œì„ ì‹œì‘</button>

    <div class="save-manage-box">
        <p style="font-size:0.9em; color:#888; margin-bottom:10px;">ë°ì´í„° ë°±ì—… / ë¶ˆëŸ¬ì˜¤ê¸°</p>
        <button class="btn-small" onclick="MainEngine.exportSaveFile()">ğŸ’¾ ì €ì¥ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
        <button class="btn-small" onclick="document.getElementById('file-input').click()">ğŸ“‚ ì €ì¥ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <input type="file" id="file-input" style="display:none;" onchange="MainEngine.importSaveFile(this)">
    </div>
</div>

<div id="game-container">
    <div class="top-bar-container">
        <div class="status-row">
            <span style="color:var(--money);">ğŸ’° <span id="gold">0</span> G</span>
            <span style="color:var(--mine);">ğŸ§ª í¬ì…˜: <span id="potion-val">0</span> (<span id="potion-cnt">0</span>/10)</span>
        </div>
        
        <div class="bar-outer">
            <div id="hp-fill"></div>
            <div class="bar-text">â¤ï¸ <span id="hp-val">0</span> / <span id="hp-max">100</span></div>
        </div>
        
        <div class="bar-outer">
            <div id="exp-fill"></div>
            <div class="bar-text">â­ Lv.<span id="user-lv">1</span> (<span id="exp-text">0%</span>)</div>
        </div>
    </div>

    <div id="page-main" class="page active">
        <div class="main-menu-btn" onclick="showPage('page-earn')">ğŸ’° ê³¨ë“œ ìˆ˜ê¸‰ (ì‚¬ëƒ¥/ì±„ê´‘)</div>
        <div class="main-menu-btn" onclick="showPage('page-upgrade')">ğŸ”¨ ì¥ë¹„ ê°•í™”</div>
        <div class="main-menu-btn" onclick="showPage('page-info')">ğŸ‘¤ ë‚´ ì •ë³´ / ì¸ë²¤í† ë¦¬</div>
        <div class="main-menu-btn" style="background:#c0392b;" onclick="MainEngine.fullHeal()">ğŸ¥ ì¹˜ë£Œì†Œ (HP íšŒë³µ)</div>
        <div class="main-menu-btn" style="background:#fff; color:#000;" onclick="showPage('page-shop-select')">ğŸ›’ ìƒì  ì…ì¥</div>
        
        <button onclick="MainEngine.logout()" style="background:none; border:none; color:#777; margin-top:20px; text-decoration:underline; cursor:pointer;">ë¡œê·¸ì•„ì›ƒ</button>
    </div>

    <div id="page-earn" class="page">
        <h2>ğŸ’° ê³¨ë“œ ìˆ˜ê¸‰</h2>
        <button class="main-menu-btn" style="background:var(--hunt);" onclick="showPage('page-hunt-select')">âš”ï¸ ì‚¬ëƒ¥í„° ì…ì¥</button>
        <button class="main-menu-btn" style="background:var(--mine); color:#000;" onclick="showPage('page-mine-select')">â›ï¸ ê´‘ì‚° ì…ì¥</button>
        <button id="btn-beg" class="main-menu-btn" style="background:#8e44ad;" onclick="MainEngine.begging()">ğŸ¤² ë™ëƒ¥í•˜ê¸° (ì¿¨íƒ€ì„ 10ì´ˆ)</button>
        
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë©”ì¸ìœ¼ë¡œ</button>
    </div>

    <div id="page-hunt-select" class="page">
        <h2>ğŸ—ºï¸ ì‚¬ëƒ¥í„° ì„ íƒ</h2>
        <div id="hunting-zone-list" style="display:flex; flex-direction:column; gap:8px;">
            </div>
        <button class="btn-nav" onclick="showPage('page-earn')">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
    </div>

    <div id="page-hunt-play" class="page">
        <h2 id="hunt-title">âš”ï¸ ì‚¬ëƒ¥í„°</h2>
        
        <button onclick="CombatSystem.scanHunt()" class="main-menu-btn" style="background:var(--hunt);">ğŸ“¡ ëª¬ìŠ¤í„° íƒìƒ‰ (2ë§ŒG)</button>
        
        <div id="hunt-grid" style="min-height:250px; display:flex; flex-direction:column; justify-content:center; gap:10px;">
            <div style="text-align:center; color:#888; padding:30px;">
                <div style="font-size:3em; margin-bottom:10px;">ğŸ“¡</div>
                <p>ëª¬ìŠ¤í„°ë¥¼ íƒìƒ‰í•´ì£¼ì„¸ìš”.</p>
            </div>
        </div>
        
        <div id="battle-log">ì „íˆ¬ ëŒ€ê¸° ì¤‘...</div>
        <button class="btn-nav" onclick="CombatSystem.resetBattleUI(); showPage('page-hunt-select');">ğŸƒ ì‚¬ëƒ¥í„° ë‚˜ê°€ê¸°</button>
    </div>

    <div id="page-mine-select" class="page">
        <h2>â›ï¸ ê´‘ì‚° ì„ íƒ</h2>
        <div style="display:flex; flex-direction:column; gap:8px;">
            <button class="main-menu-btn" style="background:#7f8c8d;" onclick="MiningSystem.enter(0)">1. ê³ ê°ˆëœ ê´‘ì‚° (2,000G)</button>
            <button class="main-menu-btn" style="background:#95a5a6;" onclick="MiningSystem.enter(1)">2. ë¬´ë„ˆì§„ ê´‘ì‚° (10,000G)</button>
            <button class="main-menu-btn" style="background:var(--mine); color:#000;" onclick="MiningSystem.enter(2)">3. ë¹›ë‚˜ëŠ” ê´‘ì‚° (100,000G)</button>
            <button class="main-menu-btn" style="background:#f1c40f; color:#000;" onclick="MiningSystem.enter(3)">4. ì°¬ë€í•œ ê´‘ì‚° (500,000G)</button>
        </div>
        <button class="btn-nav" onclick="showPage('page-earn')">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
    </div>

    <div id="page-mine-play" class="page">
        <h2 id="mine-title">â›ï¸ ì±„ê´‘ ì¤‘...</h2>
        <div id="mine-grid" class="grid-4"></div>
        <button id="mine-refresh" class="main-menu-btn" style="background:var(--mine); color:#000; display:none;" onclick="MiningSystem.refresh()">ğŸ’ ìƒˆë¡œìš´ ê´‘ë§¥ ì°¾ê¸°</button>
        <button class="btn-nav" onclick="showPage('page-mine-select')">â¬…ï¸ ê´‘ì‚° ë‚˜ê°€ê¸°</button>
    </div>
    
    <div id="page-gamble" class="page">
        <h2>ğŸ² ì¸ìƒ í•œë°© ë„ë°•ì¥</h2>
        
        <div style="padding:20px; background:rgba(0,0,0,0.2); border-radius:10px; margin-bottom:15px; border:1px solid #555;">
            <p style="margin-bottom:10px;">ë‚´ ëˆ: <span id="gamble-gold-display" style="color:var(--money); font-weight:bold;">0</span> G</p>
            
            <input type="number" id="gamble-amount" placeholder="ì–¼ë§ˆë¥¼ ê±°ì‹œê² ìŠµë‹ˆê¹Œ?" 
                   style="width:90%; padding:15px; border-radius:8px; border:none; margin-bottom:15px; font-size:1.1em; text-align:center;">
            
            <div style="display:flex; gap:10px; justify-content:center;">
                <button class="main-menu-btn" style="width:48%; margin:0; background:#c0392b;" onclick="GamblingSystem.play('odd')">ğŸ”´ í™€</button>
                <button class="main-menu-btn" style="width:48%; margin:0; background:#2980b9;" onclick="GamblingSystem.play('even')">ğŸ”µ ì§</button>
            </div>
        </div>

        <div id="gamble-log" style="height:120px; overflow-y:auto; background:#111; padding:10px; border-radius:8px; border:1px solid #333; font-size:0.9em; text-align:center; color:#888;">
            ë² íŒ… ê¸ˆì•¡ì„ ì…ë ¥í•˜ê³  í™€/ì§ì„ ì„ íƒí•˜ì„¸ìš”.<br>
            ì„±ê³µ ì‹œ 2ë°°, ì‹¤íŒ¨ ì‹œ 0ì›!
        </div>

        <button class="btn-nav" onclick="showPage('page-shop-select')">â¬…ï¸ ë‚˜ê°€ê¸°</button>
    </div>
    
    <div id="page-upgrade" class="page">
        <h2>ğŸ”¨ ì¥ë¹„ ê°•í™”</h2>
        <div id="upgrade-target-display" style="padding:10px; background:rgba(0,0,0,0.2); border-radius:8px; margin-bottom:10px;">ê°•í™”í•  ì¥ë¹„ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>
        
        <button onclick="MainEngine.openInventoryModal()" class="btn-nav" style="background:var(--hunt); margin-bottom:15px;">ğŸ“¦ ì¸ë²¤í† ë¦¬ì—ì„œ ì¥ë¹„ ì„ íƒ</button>
        
        <div style="display:flex; justify-content:space-between; margin:10px 0; font-weight:bold; font-size:1.1em;">
            <span style="color:#4ecca3;">ì„±ê³µ: <span id="up-chance">0</span>%</span>
            <span style="color:var(--point);">íŒŒê´´: <span id="up-break">0</span>%</span>
        </div>
        
        <button class="btn-upgrade" id="btn-up-exec" onclick="UpgradeSystem.try()" disabled>ê°•í™”í•˜ê¸°</button>
        <button class="btn-nav" style="background:#3498db;" id="auto-btn" onclick="UpgradeSystem.startAuto()">ìë™ ê°•í™” ì‹œì‘</button>
        <button class="btn-nav" id="btn-up-sell" style="background:#c0392b; display:none;" onclick="MainEngine.sellFromUpgrade()">ì•„ì´í…œ íŒë§¤</button>
        
        <div id="log-container">ì‹œìŠ¤í…œ: ì¤€ë¹„ ì™„ë£Œ.</div>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë©”ì¸ìœ¼ë¡œ</button>
    </div>

    <div id="page-info" class="page">
        <h2>ğŸ‘¤ ë‚´ ì •ë³´</h2>
        <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:12px; margin-bottom:15px; text-align:left; font-size:0.95em;">
            <p>âš”ï¸ ê³µê²©ë ¥: <span id="info-atk" style="color:#f39c12; font-weight:bold;">0</span></p>
            <p>ğŸ›¡ï¸ ë°©ì–´ë ¥: <span id="info-def" style="color:#3498db; font-weight:bold;">0</span></p>
            <p>â¤ï¸ ìµœëŒ€ ì²´ë ¥: <span id="info-hp" style="color:#e74c3c; font-weight:bold;">0</span></p>
        </div>
        <h3>ğŸ’ ë³´ìœ  ì•„ì´í…œ</h3>
        <div id="inventory-list" style="padding-bottom:10px;"></div>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë©”ì¸ìœ¼ë¡œ</button>
    </div>

    <div id="page-shop-select" class="page">
        <h2>ğŸª ìƒì </h2>
        <div style="display:flex; flex-direction:column; gap:10px;">
            <button class="main-menu-btn" onclick="ShopSystem.open('equip')">âš”ï¸ ì¥ë¹„ ìƒì </button>
            <button class="main-menu-btn" style="background:var(--hunt);" onclick="ShopSystem.open('consume')">ğŸ§ª ì†Œë¹„ ì•„ì´í…œ ìƒì </button>
            
            <button class="main-menu-btn" style="background:#8e44ad;" onclick="showPage('page-gamble'); GamblingSystem.init();">ğŸ² ë„ë°•ì¥ (í™€ì§)</button>
        </div>
        <button class="btn-nav" onclick="showPage('page-main')">â¬…ï¸ ë©”ì¸ìœ¼ë¡œ</button>
    </div>

    <div id="page-shop-detail" class="page">
        <h2 id="shop-title">ëª©ë¡</h2>
        <div id="shop-list"></div>
        <button class="btn-nav" onclick="showPage('page-shop-select')">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
    </div>

    <div id="inv-modal" class="modal">
        <div class="modal-content">
            <h3>ğŸ“¦ ê°•í™”í•  ì¥ë¹„ ì„ íƒ</h3>
            <div id="modal-item-list" style="max-height:300px; overflow-y:auto; margin-bottom:10px;"></div>
            <button class="btn-nav" onclick="MainEngine.closeModal()">ë‹«ê¸°</button>
        </div>
    </div>
</div>
</body>
</html>



